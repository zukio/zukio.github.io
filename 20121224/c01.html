
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <canvas id = "stage" width="640" height="480">
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>

  <script>
  $(function(){
    //DOMの読み込み
    var stage = new createjs.Stage('stage');

    //図形の描画
    var circle = new createjs.Shape();
    circle.graphics.beginFill('#00FF00').drawCircle(0,0,40);

    //ステージに図形を配置
    stage.addChild(circle);

    //後から座標を変えることもできるよ
    circle.x = 200;
    circle.y = 300;

    //トゥイーンアニメーション
    createjs.Tween.get(circle).
    to({x:400, y:400, alpha:0.5}, 1000, createjs.Ease.backOut).
    wait(500).
    to({x:400, y:50, alpha:1}, 500, createjs.Ease.cubicIn).
    to({x:50, y:50, scaleX:2, scaleY:2}, 400, createjs.Ease.bounceOut)
    .call(nextAnime);

    function nextAnime(){
      circle.scaleX = 1;
      circle.scaleY = 1;
    }

    //別の図形も描いてみよう
    var star = new createjs.Shape();
    star.graphics.beginFill('#FF0000').drawPolyStar(0, 0, 40, 5, 0.6, -90);
    stage.addChild(star);

    //四角は左上が起点だよ
    var rect = new createjs.Shape();
    rect.graphics.beginFill('#0000FF').drawRect(0, 0, 50, 50);
    stage.addChild(rect);
    rect.alpha=0.5;
    //rext.visible = false;

    //更新
    //stage.update();

    //アニメーション
    createjs.Ticker.addEventListener('tick', tick);
    //requestAnimationFrame（slideと違ってウィンドウを閉じたら止まる）
    createjs.Ticker.timingMode = createjs.Ticker.RAF_SYNCED;

    function tick(){

      /*circle.x += 5;
      if(circle.x > stage.canvas.width){
        circle.x = 0;
      }*/

      star.rotation += 5;
      if(star.rotation >= 360){
        star.rotation = 0;
      }

      rect.y += 5;
      if(rect.y > stage.canvas.height){
        rect.y = 0;
      }

      stage.update();
    }


  })
  </script>
</body>
</html>
